{"version":3,"sources":["assets/images/animals-in-line.jpg","pages/root/Root.js","components/PetProfile/PetProfile.js","config.js","services/apiService.js","pages/adoption/Adoption.js","components/App/App.js","index.js"],"names":["module","exports","Root","handleNext","e","preventDefault","props","history","push","className","classfName","src","animalsInLine","alt","type","onClick","this","Component","withRouter","PetProfile","age","imageURL","breed","name","description","gender","story","defaultProps","process","apiService","getPeopleInLine","fetch","config","then","res","ok","json","Promise","reject","addPerson","method","headers","body","JSON","stringify","adopt","getNextPet","Adoption","state","value","touched","submitted","afterAdopting","peopleInFront","peopleBehind","petsInFront","cat","dog","adoptedPet","timerRunning","error","handleOtherUsers","length","setState","setTimeout","handlePeopleLeaving","handlePeopleComing","Math","floor","random","pet","shift","catch","person","handleAdopt","queueUser","runFunction","prevState","updateName","validateName","trim","generatePeopleLineString","peopleInLine","user","join","all","people","adoptedPetString","peopleInLineString","renderAdoptButton","id","aria-required","aria-describedby","aria-invalid","onChange","target","disabled","App","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.845b4bbd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/animals-in-line.16f1ddc0.jpg\";","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport './Root.css';\r\nimport animalsInLine from '../../assets/images/animals-in-line.jpg';\r\n\r\nclass Root extends Component {\r\n  handleNext = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/adoption');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='flex-column al-center w-80 m-auto m-b-1'>\r\n        <p classfName='description'>\r\n          You can adopt a cat or a dog. When you go to the adoption page, you will only be\r\n          shown a cat and dog that have been in the shelter the longest. You will also see a list of people in line.\r\n          Enter your name to be added to the end of the line. When it is your turn, you can adopt a pet by clicking the\r\n          button \"Adopt\" under the pet you want to adopt.\r\n        </p>\r\n        <img src={animalsInLine} alt='Cats and dogs in a line.' />\r\n        <button \r\n          className='m-t-1'\r\n          type='submit' \r\n          onClick={this.handleNext}\r\n        >Start Adoption Process\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Root);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './PetProfile.css'\r\n\r\nclass PetProfile extends Component {\r\n  render() {\r\n    if (this.props.age === -1) \r\n      return <p>None available for adoption</p>;\r\n    return (\r\n      <div className='pet-profile'>\r\n        <img src={this.props.imageURL} alt={`The ${this.props.breed} for adoption.`} />\r\n        <section className='w-80 m-auto'>\r\n          <h4 className='txt-center'>{this.props.name}</h4>\r\n          <p className='txt-left'>Age: {this.props.age}</p>\r\n          <p className='txt-left'>Breed: {this.props.breed}</p>\r\n          <p className='txt-left'>Description: {this.props.description}</p>\r\n          <p className='txt-left'>Gender: {this.props.gender}</p>\r\n          <p className='txt-left'>Story: {this.props.story}</p>\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPetProfile.defaultProps = {\r\n  age: -1,\r\n  breed: '',\r\n  description: '',\r\n  gender: '',\r\n  imageURL: '',\r\n  name: '',\r\n  story: ''\r\n}\r\n\r\nPetProfile.propTypes = {\r\n  age: PropTypes.number.isRequired,\r\n  breed: PropTypes.string.isRequired,\r\n  description: PropTypes.string.isRequired,\r\n  gender: PropTypes.string.isRequired,\r\n  imageURL: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  story: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default PetProfile;\r\n","export default {\r\n  REACT_APP_API_BASE: process.env.REACT_APP_API_BASE || 'http://localhost:8080/api'\r\n}","import config from '../config';\r\n\r\nconst apiService = {\r\n  getPeopleInLine() {\r\n    return fetch(`${config.REACT_APP_API_BASE}/people`)\r\n      .then(res =>\r\n        (!res.ok)\r\n          ? res.json().then(e => Promise.reject(e))\r\n          : res.json()\r\n      )\r\n  },\r\n\r\n  addPerson(name) {\r\n    return fetch(`${config.REACT_APP_API_BASE}/people`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'content-type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ name }),\r\n    })\r\n      .then(res =>\r\n        (!res.ok)\r\n          ? res.json().then(e => Promise.reject(e))\r\n          : res.json()\r\n      )\r\n  },\r\n\r\n  adopt(type) {\r\n    return fetch(`${config.REACT_APP_API_BASE}/${type}`, {\r\n      method: 'DELETE'\r\n    })\r\n      .then(res =>\r\n        (!res.ok)\r\n          ? res.json().then(e => Promise.reject(e))\r\n          : res.json()\r\n      )\r\n  },\r\n\r\n  getNextPet(type) {\r\n    return fetch(`${config.REACT_APP_API_BASE}/${type}`)\r\n      .then(res =>\r\n        (!res.ok)\r\n          ? res.json().then(e => Promise.reject(e))\r\n          : res.json()\r\n      )\r\n  }\r\n};\r\n\r\nexport default apiService;","import React, { Component } from 'react';\r\nimport PetProfile from '../../components/PetProfile/PetProfile';\r\nimport apiService from '../../services/apiService';\r\n\r\nclass Adoption extends Component {\r\n  state = {\r\n    name: {\r\n      value: '',\r\n      touched: false,\r\n      submitted: '',\r\n      afterAdopting: ''\r\n    },\r\n    peopleInFront: [],\r\n    peopleBehind: [],\r\n    petsInFront: {\r\n      cat: {},\r\n      dog: {}\r\n    },\r\n    adoptedPet: null,\r\n    timerRunning: false,\r\n    error: ''\r\n  }\r\n\r\n  handleOtherUsers = (peopleInFront, submitted, timerRunning) => {\r\n    if (timerRunning) return;\r\n    if (peopleInFront.length) {\r\n      this.setState({ timerRunning: true })\r\n      setTimeout(this.handlePeopleLeaving, 5000);\r\n    } else if (submitted) {\r\n      this.setState({ timerRunning: true })\r\n      setTimeout(this.handlePeopleComing, 5000);\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  handlePeopleLeaving = () => {\r\n    if (!this.state.peopleInFront.length) return;\r\n\r\n    this.setState(\r\n      { error: '' },\r\n      () => {\r\n        let type;\r\n        // if no cats, adopt dog, and vice versa\r\n        if (!this.state.petsInFront.cat) type = 'dog';\r\n        else if (!this.state.petsInFront.dog) type = 'cat';\r\n        else type = ['cat', 'dog'][Math.floor(Math.random() * 2)];\r\n        apiService.adopt(type)\r\n          .then(() => {\r\n            // change currently shown cat or dog\r\n            apiService.getNextPet(type)\r\n              .then((pet) => {\r\n                // remove person in front of line\r\n                const peopleInFront = [...this.state.peopleInFront];\r\n                peopleInFront.shift();\r\n                const petsInFront = { ...this.state.petsInFront };\r\n                petsInFront[type] = pet;\r\n                this.setState(\r\n                  { peopleInFront, petsInFront, timerRunning: false, error: '' },\r\n                  () => this.handleOtherUsers(peopleInFront, this.state.name.submitted, false));\r\n              })\r\n              .catch((e) => { this.setState({ error: e.error }) });\r\n          })\r\n          .catch((e) => { this.setState({ error: e.error }) });\r\n      }\r\n    )\r\n  }\r\n\r\n  handlePeopleComing = () => {\r\n    if (!this.state.name.submitted) return;\r\n\r\n    this.setState(\r\n      { error: '' },\r\n      () => {\r\n        const person = ['John', 'Apple', 'William', 'Sarah'][Math.floor(Math.random() * 4)];\r\n        apiService.addPerson(person)\r\n          .then(({ person }) => {\r\n            const peopleBehind = [...this.state.peopleBehind, person];\r\n            this.setState({ peopleBehind, timerRunning: false, error: '' },\r\n              () => this.handleOtherUsers([], this.state.name.submitted, false));\r\n          })\r\n          .catch((e) => { this.setState({ error: e.error }) });\r\n      }\r\n    )\r\n  }\r\n\r\n  handleAdopt = (e, type) => {\r\n    e.preventDefault();\r\n    this.setState(\r\n      { error: '' },\r\n      () => {\r\n        apiService.adopt(type)\r\n          .then((res) => {\r\n            const person = res.person;\r\n            const adoptedPet = res[type];\r\n\r\n            if (person !== this.state.name.submitted)\r\n              return this.setState({ error: 'Got back another person, not user, adopted pet.' })\r\n\r\n            // remove user from line\r\n            const name = {\r\n              value: person,\r\n              touched: false,\r\n              submitted: '',\r\n              afterAdopting: this.state.name.submitted\r\n            };\r\n            // update with adopted pet and remove from pet line\r\n            adoptedPet.type = type;\r\n            // move people to front of line\r\n            const peopleInFront = [...this.state.peopleBehind];\r\n            const peopleBehind = [];\r\n            // change currently shown cat or dog\r\n            apiService.getNextPet(type)\r\n              .then((pet) => {\r\n                const petsInFront = { ...this.state.petsInFront };\r\n                petsInFront[type] = pet;\r\n                this.setState(\r\n                  { name, adoptedPet, petsInFront, peopleInFront, peopleBehind },\r\n                  () => this.handleOtherUsers(peopleInFront, name.submitted, false)\r\n                );\r\n              })\r\n              .catch((e) => { this.setState({ error: e.error }) });\r\n          })\r\n          .catch((e) => { this.setState({ error: e.error }) });\r\n      }\r\n    )\r\n  }\r\n\r\n  queueUser = (e) => {\r\n    e.preventDefault();\r\n    this.setState(\r\n      { error: '' },\r\n      () => {\r\n        apiService.addPerson(this.state.name.value)\r\n          .then(({ person }) => {\r\n            let runFunction = false;\r\n            this.setState(prevState => {\r\n              if (!prevState.timerRunning)\r\n                runFunction = true;\r\n              return {\r\n                name: {\r\n                  value: '',\r\n                  touched: false,\r\n                  submitted: person,\r\n                  afterAdopting: this.state.name.afterAdopting\r\n                },\r\n                error: ''\r\n              }\r\n            },\r\n              () => {\r\n                if (runFunction)\r\n                  this.handleOtherUsers(this.state.peopleInFront, person, false);\r\n              })\r\n          })\r\n          .catch((e) => { this.setState({ error: e.error }) });\r\n      }\r\n    )\r\n  }\r\n\r\n  updateName = (name) => {\r\n    this.setState({\r\n      name: {\r\n        value: name,\r\n        touched: true,\r\n        submitted: this.state.name.submitted,\r\n        afterAdopting: this.state.name.afterAdopting\r\n      }\r\n    });\r\n  }\r\n\r\n  validateName = () => {\r\n    const name = this.state.name.value.trim();\r\n    if (!name) return 'Name cannot be empty.';\r\n    return;\r\n  }\r\n\r\n  generatePeopleLineString = () => {\r\n    let peopleInLine;\r\n    let user;\r\n\r\n    // whether user is in line\r\n    if (this.state.name.submitted) {\r\n      if (this.state.peopleInFront.length) {\r\n        user = ', ' + this.state.name.submitted;\r\n      } else {\r\n        user = this.state.name.submitted;\r\n      }\r\n    } else {\r\n      user = '';\r\n    }\r\n    peopleInLine = this.state.peopleInFront.join(', ') + user;\r\n    // whether people are behind user\r\n    if (this.state.peopleBehind.length)\r\n      peopleInLine += (', ' + this.state.peopleBehind.join(', '));\r\n    return peopleInLine;\r\n  }\r\n\r\n  componentDidMount() {\r\n    Promise.all([\r\n      apiService.getPeopleInLine(),\r\n      apiService.getNextPet('cat'),\r\n      apiService.getNextPet('dog')\r\n    ])\r\n      .then(res => {\r\n        this.setState({\r\n          peopleInFront: res[0].people,\r\n          petsInFront: {\r\n            cat: res[1],\r\n            dog: res[2]\r\n          }\r\n        },\r\n          () => this.handleOtherUsers(res[0].people, ''));\r\n      })\r\n      .catch((e) => { this.setState({ error: e.error }) });\r\n  }\r\n\r\n  render() {\r\n    let peopleInLineString = this.generatePeopleLineString();\r\n    let renderAdoptButton = this.state.peopleInFront.length === 0 && this.state.name.submitted;\r\n    let adoptedPetString;\r\n    if (this.state.adoptedPet)\r\n      adoptedPetString = `${this.state.name.afterAdopting}, you have adopted a ${this.state.adoptedPet.type}:`;\r\n\r\n\r\n    return (\r\n      <div className='flex-column al-center w-fit-content m-auto m-b-1'>\r\n        <h2>Adoption</h2>\r\n        <span className='error'>{this.state.error}</span>\r\n        {this.state.adoptedPet\r\n          ? <div className='lg-card txt-center'>\r\n            <p className='w-80'>{adoptedPetString}</p>\r\n            <PetProfile\r\n              age={this.state.adoptedPet.age}\r\n              breed={this.state.adoptedPet.breed}\r\n              description={this.state.adoptedPet.description}\r\n              gender={this.state.adoptedPet.gender}\r\n              imageURL={this.state.adoptedPet.imageURL}\r\n              name={this.state.adoptedPet.name}\r\n              story={this.state.adoptedPet.story}\r\n            />\r\n          </div>\r\n          : null}\r\n        <p className='w-80 m-auto m-t-1'>People in line: {peopleInLineString}</p>\r\n        <form className='m-auto m-t-1'>\r\n          <label>To stand in line, enter your name: </label>\r\n          <div className='m-t-1'>\r\n            <input\r\n              id={'name'}\r\n              name={'name'}\r\n              aria-required='true'\r\n              aria-describedby={'name-error-message'}\r\n              aria-invalid={!!this.validateName()}\r\n              onChange={(e) => this.updateName(e.target.value)}\r\n            />\r\n            <button\r\n              type='submit'\r\n              onClick={(e) => { this.queueUser(e) }}\r\n              disabled={this.validateName() || this.state.name.submitted}\r\n            > Join Line\r\n           </button>\r\n          </div>\r\n          <span className='error'>{this.state.name.touched && this.validateName()}</span>\r\n        </form>\r\n        <article className='pets'>\r\n          <h3>Pets available for adoption: </h3>\r\n          <section className='lg-card txt-center'>\r\n            <h4 className='txt-center m-t-0'>Cat</h4>\r\n            {this.state.petsInFront.cat\r\n              ? (\r\n                <>\r\n                  <PetProfile\r\n                    age={this.state.petsInFront.cat.age}\r\n                    breed={this.state.petsInFront.cat.breed}\r\n                    description={this.state.petsInFront.cat.description}\r\n                    gender={this.state.petsInFront.cat.gender}\r\n                    imageURL={this.state.petsInFront.cat.imageURL}\r\n                    name={this.state.petsInFront.cat.name}\r\n                    story={this.state.petsInFront.cat.story}\r\n                  />\r\n                  {renderAdoptButton &&\r\n                    <button\r\n                      className='m-auto'\r\n                      type='submit'\r\n                      disabled={this.state.petsInFront.cat.name == null}\r\n                      onClick={(e) => this.handleAdopt(e, 'cat')}\r\n                    > Adopt\r\n                    </button>}\r\n                </>\r\n              )\r\n              : <p>None available for adoption</p>}\r\n          </section>\r\n          <section className='lg-card m-t-1 txt-center'>\r\n            <h4 className='txt-center m-t-0'>Dog</h4>\r\n            {this.state.petsInFront.dog\r\n              ? (\r\n                <>\r\n                  <PetProfile\r\n                    age={this.state.petsInFront.dog.age}\r\n                    breed={this.state.petsInFront.dog.breed}\r\n                    description={this.state.petsInFront.dog.description}\r\n                    gender={this.state.petsInFront.dog.gender}\r\n                    imageURL={this.state.petsInFront.dog.imageURL}\r\n                    name={this.state.petsInFront.dog.name}\r\n                    story={this.state.petsInFront.dog.story}\r\n                  />\r\n                  {renderAdoptButton &&\r\n                    <button\r\n                      className='m-auto'\r\n                      type='submit'\r\n                      disabled={this.state.petsInFront.dog.name == null}\r\n                      onClick={(e) => this.handleAdopt(e, 'dog')}\r\n                    > Adopt\r\n                    </button>}\r\n                </>\r\n              )\r\n              : <p>None available for adoption</p>}\r\n          </section>\r\n        </article>\r\n      </div >\r\n    );\r\n  }\r\n}\r\n\r\nexport default Adoption;\r\n","import React, { Component } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Root from '../../pages/root/Root';\r\nimport Adoption from '../../pages/adoption/Adoption';\r\nimport '../../assets/styles/base.css';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <>\r\n        <header>\r\n          <h1 className='m-l-2'>Petful</h1>\r\n        </header>\r\n        <main className='App' >\r\n          <Switch>\r\n            <Route exact path='/' component={Root} />\r\n            <Route path='/adoption' component={Adoption} />\r\n          </Switch>\r\n        </main>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;","import './index.css';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}