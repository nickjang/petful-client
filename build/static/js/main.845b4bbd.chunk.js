(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{23:function(e,t,n){e.exports=n.p+"static/media/animals-in-line.16f1ddc0.jpg"},25:function(e,t,n){e.exports=n(39)},26:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);n(26);var a=n(0),r=n.n(a),o=n(22),s=n.n(o),i=n(13),c=n(6),l=n(7),p=n(9),u=n(8),m=n(10),d=n(1),h=(n(31),n(23)),f=n.n(h),g=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleNext=function(e){e.preventDefault(),n.props.history.push("/adoption")},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex-column al-center w-80 m-auto m-b-1"},r.a.createElement("p",{classfName:"description"},'You can adopt a cat or a dog. When you go to the adoption page, you will only be shown a cat and dog that have been in the shelter the longest. You will also see a list of people in line. Enter your name to be added to the end of the line. When it is your turn, you can adopt a pet by clicking the button "Adopt" under the pet you want to adopt.'),r.a.createElement("img",{src:f.a,alt:"Cats and dogs in a line."}),r.a.createElement("button",{className:"m-t-1",type:"submit",onClick:this.handleNext},"Start Adoption Process"))}}]),t}(a.Component),b=Object(d.f)(g),E=n(19),v=n(14),N=(n(37),function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return-1===this.props.age?r.a.createElement("p",null,"None available for adoption"):r.a.createElement("div",{className:"pet-profile"},r.a.createElement("img",{src:this.props.imageURL,alt:"The ".concat(this.props.breed," for adoption.")}),r.a.createElement("section",{className:"w-80 m-auto"},r.a.createElement("h4",{className:"txt-center"},this.props.name),r.a.createElement("p",{className:"txt-left"},"Age: ",this.props.age),r.a.createElement("p",{className:"txt-left"},"Breed: ",this.props.breed),r.a.createElement("p",{className:"txt-left"},"Description: ",this.props.description),r.a.createElement("p",{className:"txt-left"},"Gender: ",this.props.gender),r.a.createElement("p",{className:"txt-left"},"Story: ",this.props.story)))}}]),t}(a.Component));N.defaultProps={age:-1,breed:"",description:"",gender:"",imageURL:"",name:"",story:""};var j=N,y="https://nickjang-petful.herokuapp.com/api",F={getPeopleInLine:function(){return fetch("".concat(y,"/people")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},addPerson:function(e){return fetch("".concat(y,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},adopt:function(e){return fetch("".concat(y,"/").concat(e),{method:"DELETE"}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getNextPet:function(e){return fetch("".concat(y,"/").concat(e)).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},I=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:{value:"",touched:!1,submitted:"",afterAdopting:""},peopleInFront:[],peopleBehind:[],petsInFront:{cat:{},dog:{}},adoptedPet:null,timerRunning:!1,error:""},n.handleOtherUsers=function(e,t,a){if(!a)if(e.length)n.setState({timerRunning:!0}),setTimeout(n.handlePeopleLeaving,5e3);else{if(!t)return;n.setState({timerRunning:!0}),setTimeout(n.handlePeopleComing,5e3)}},n.handlePeopleLeaving=function(){n.state.peopleInFront.length&&n.setState({error:""},(function(){var e;e=n.state.petsInFront.cat?n.state.petsInFront.dog?["cat","dog"][Math.floor(2*Math.random())]:"cat":"dog",F.adopt(e).then((function(){F.getNextPet(e).then((function(t){var a=Object(v.a)(n.state.peopleInFront);a.shift();var r=Object(E.a)({},n.state.petsInFront);r[e]=t,n.setState({peopleInFront:a,petsInFront:r,timerRunning:!1,error:""},(function(){return n.handleOtherUsers(a,n.state.name.submitted,!1)}))})).catch((function(e){n.setState({error:e.error})}))})).catch((function(e){n.setState({error:e.error})}))}))},n.handlePeopleComing=function(){n.state.name.submitted&&n.setState({error:""},(function(){var e=["John","Apple","William","Sarah"][Math.floor(4*Math.random())];F.addPerson(e).then((function(e){var t=e.person,a=[].concat(Object(v.a)(n.state.peopleBehind),[t]);n.setState({peopleBehind:a,timerRunning:!1,error:""},(function(){return n.handleOtherUsers([],n.state.name.submitted,!1)}))})).catch((function(e){n.setState({error:e.error})}))}))},n.handleAdopt=function(e,t){e.preventDefault(),n.setState({error:""},(function(){F.adopt(t).then((function(e){var a=e.person,r=e[t];if(a!==n.state.name.submitted)return n.setState({error:"Got back another person, not user, adopted pet."});var o={value:a,touched:!1,submitted:"",afterAdopting:n.state.name.submitted};r.type=t;var s=Object(v.a)(n.state.peopleBehind),i=[];F.getNextPet(t).then((function(e){var a=Object(E.a)({},n.state.petsInFront);a[t]=e,n.setState({name:o,adoptedPet:r,petsInFront:a,peopleInFront:s,peopleBehind:i},(function(){return n.handleOtherUsers(s,o.submitted,!1)}))})).catch((function(e){n.setState({error:e.error})}))})).catch((function(e){n.setState({error:e.error})}))}))},n.queueUser=function(e){e.preventDefault(),n.setState({error:""},(function(){F.addPerson(n.state.name.value).then((function(e){var t=e.person,a=!1;n.setState((function(e){return e.timerRunning||(a=!0),{name:{value:"",touched:!1,submitted:t,afterAdopting:n.state.name.afterAdopting},error:""}}),(function(){a&&n.handleOtherUsers(n.state.peopleInFront,t,!1)}))})).catch((function(e){n.setState({error:e.error})}))}))},n.updateName=function(e){n.setState({name:{value:e,touched:!0,submitted:n.state.name.submitted,afterAdopting:n.state.name.afterAdopting}})},n.validateName=function(){if(!n.state.name.value.trim())return"Name cannot be empty."},n.generatePeopleLineString=function(){var e,t;return t=n.state.name.submitted?n.state.peopleInFront.length?", "+n.state.name.submitted:n.state.name.submitted:"",e=n.state.peopleInFront.join(", ")+t,n.state.peopleBehind.length&&(e+=", "+n.state.peopleBehind.join(", ")),e},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([F.getPeopleInLine(),F.getNextPet("cat"),F.getNextPet("dog")]).then((function(t){e.setState({peopleInFront:t[0].people,petsInFront:{cat:t[1],dog:t[2]}},(function(){return e.handleOtherUsers(t[0].people,"")}))})).catch((function(t){e.setState({error:t.error})}))}},{key:"render",value:function(){var e,t=this,n=this.generatePeopleLineString(),a=0===this.state.peopleInFront.length&&this.state.name.submitted;return this.state.adoptedPet&&(e="".concat(this.state.name.afterAdopting,", you have adopted a ").concat(this.state.adoptedPet.type,":")),r.a.createElement("div",{className:"flex-column al-center w-fit-content m-auto m-b-1"},r.a.createElement("h2",null,"Adoption"),r.a.createElement("span",{className:"error"},this.state.error),this.state.adoptedPet?r.a.createElement("div",{className:"lg-card txt-center"},r.a.createElement("p",{className:"w-80"},e),r.a.createElement(j,{age:this.state.adoptedPet.age,breed:this.state.adoptedPet.breed,description:this.state.adoptedPet.description,gender:this.state.adoptedPet.gender,imageURL:this.state.adoptedPet.imageURL,name:this.state.adoptedPet.name,story:this.state.adoptedPet.story})):null,r.a.createElement("p",{className:"w-80 m-auto m-t-1"},"People in line: ",n),r.a.createElement("form",{className:"m-auto m-t-1"},r.a.createElement("label",null,"To stand in line, enter your name: "),r.a.createElement("div",{className:"m-t-1"},r.a.createElement("input",{id:"name",name:"name","aria-required":"true","aria-describedby":"name-error-message","aria-invalid":!!this.validateName(),onChange:function(e){return t.updateName(e.target.value)}}),r.a.createElement("button",{type:"submit",onClick:function(e){t.queueUser(e)},disabled:this.validateName()||this.state.name.submitted}," Join Line")),r.a.createElement("span",{className:"error"},this.state.name.touched&&this.validateName())),r.a.createElement("article",{className:"pets"},r.a.createElement("h3",null,"Pets available for adoption: "),r.a.createElement("section",{className:"lg-card txt-center"},r.a.createElement("h4",{className:"txt-center m-t-0"},"Cat"),this.state.petsInFront.cat?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{age:this.state.petsInFront.cat.age,breed:this.state.petsInFront.cat.breed,description:this.state.petsInFront.cat.description,gender:this.state.petsInFront.cat.gender,imageURL:this.state.petsInFront.cat.imageURL,name:this.state.petsInFront.cat.name,story:this.state.petsInFront.cat.story}),a&&r.a.createElement("button",{className:"m-auto",type:"submit",disabled:null==this.state.petsInFront.cat.name,onClick:function(e){return t.handleAdopt(e,"cat")}}," Adopt")):r.a.createElement("p",null,"None available for adoption")),r.a.createElement("section",{className:"lg-card m-t-1 txt-center"},r.a.createElement("h4",{className:"txt-center m-t-0"},"Dog"),this.state.petsInFront.dog?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{age:this.state.petsInFront.dog.age,breed:this.state.petsInFront.dog.breed,description:this.state.petsInFront.dog.description,gender:this.state.petsInFront.dog.gender,imageURL:this.state.petsInFront.dog.imageURL,name:this.state.petsInFront.dog.name,story:this.state.petsInFront.dog.story}),a&&r.a.createElement("button",{className:"m-auto",type:"submit",disabled:null==this.state.petsInFront.dog.name,onClick:function(e){return t.handleAdopt(e,"dog")}}," Adopt")):r.a.createElement("p",null,"None available for adoption"))))}}]),t}(a.Component),P=(n(38),function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h1",{className:"m-l-2"},"Petful")),r.a.createElement("main",{className:"App"},r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:b}),r.a.createElement(d.a,{path:"/adoption",component:I}))))}}]),t}(a.Component));s.a.render(r.a.createElement(i.a,null,r.a.createElement(P,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.845b4bbd.chunk.js.map